{
    "inputs": [
        {
            "name": "Sample options",
            "description": "Parameters relating to the sample being analysed.",
            "advanced": false,
            "params": {
                "samplesheet": {
                    "name": "Samples",
                    "description": "The samples to process.",
                    "type": "csv",
                    "required": true,
                    "takes_samples": true,
                    "sample_types": ["CLIP"],
                    "columns": [
                        {
                            "name": "group",
                            "type": "string",
                            "required": true,
                            "render": true
                        },
                        {
                            "name": "replicate",
                            "type": "string",
                            "required": true,
                            "render": true
                        },
                        {
                            "name": "fastq_1",
                            "type": "data",
                            "from_sample": 1,
                            "required": true,
                            "render": false
                        },
                        {
                            "name": "fastq_2",
                            "type": "data",
                            "from_sample": 2,
                            "required": false,
                            "render": false
                        }
                    ]
                }
            }
        },
        {
            "name": "Genome options",
            "description": "The genome being aligned to.",
            "advanced": false,
            "from_execution": true,
            "params": {
                "fasta": {
                    "name": "FASTA",
                    "type": "data",
                    "pattern": "^\\S+\\.fn?a(sta)?(\\.gz)?$",
                    "required": true,
                    "execution_output": {
                        "process": null,
                        "pattern": "^\\S+\\.fn?a(sta)?(\\.gz)?$"
                    },
                    "description": "A raw genome FASTA file."
                },
                "gtf": {
                    "name": "GTF",
                    "type": "data",
                    "pattern": "^\\S+\\.gtf(\\.gz)?$",
                    "required": true,
                    "execution_output": {
                        "process": null,
                        "pattern": "^\\S+\\.gtf(\\.gz)?$"
                    },
                    "description": "An annotation for the genome."
                },
                "smrna_fasta": {
                    "name": "smRNA FASTA",
                    "type": "data",
                    "pattern": "fasta|fa$",
                    "required": true,
                    "execution_output": {
                        "process": null,
                        "pattern": "(smrna|trna)\\.(fasta|fa)$"
                    },
                    "description": "FASTA file to be mapped to before the genome file, typically containing rRNA and tRNA sequences."
                },
                "fasta_fai": {
                    "name": "Genome FASTA index",
                    "type": "data",
                    "pattern": "fai$",
                    "required": false,
                    "execution_output": {
                        "process": "PREPARE_PRIMARY_GENOME:CUSTOM_GETCHROMSIZES",
                        "pattern": "\\.fai$"
                    },
                    "description": "A genome FASTA file index generated by Samtools faidx."
                },
                "chrom_sizes": {
                    "name": "Genome chromosome lengths",
                    "type": "data",
                    "pattern": "sizes$",
                    "required": false,
                    "execution_output": {
                        "process": "PREPARE_PRIMARY_GENOME:CUSTOM_GETCHROMSIZES",
                        "pattern": "\\.sizes$"
                    },
                    "description": "A tabulated file of chromosome names and lengths."
                },
                "target_genome_index": {
                    "name": "Genome STAR index",
                    "type": "data",
                    "pattern": "",
                    "required": false,
                    "execution_output": {
                        "process": "STAR_GENOMEGENERATE",
                        "pattern": ""
                    },
                    "description": "A genome index generated by STAR."
                },
                "smrna_genome_index": {
                    "name": "Small RNA Bowtie index",
                    "type": "data",
                    "pattern": "",
                    "required": false,
                    "execution_output": {
                        "process": "BOWTIE_BUILD",
                        "pattern": ""
                    },
                    "description": "A small RNA index for pre-mapping generated by Bowtie."
                },
                "smrna_fasta_fai": {
                    "name": "Small RNA FASTA index",
                    "type": "data",
                    "pattern": "fai$",
                    "required": false,
                    "execution_output": {
                        "process": "PREPARE_SMRNA_GENOME:CUSTOM_GETCHROMSIZES",
                        "pattern": "\\.fai$"
                    },
                    "description": "A small RNA FASTA file index generated by Samtools faidx."
                },
                "smrna_chrom_sizes": {
                    "name": "Small RNA lengths",
                    "type": "data",
                    "pattern": "sizes$",
                    "required": false,
                    "execution_output": {
                        "process": "PREPARE_SMRNA_GENOME:CUSTOM_GETCHROMSIZES",
                        "pattern": "\\.sizes$"
                    },
                    "description": "A tabulated file of small RNA names and lengths."
                },
                "longest_transcript": {
                    "name": "Longest transcript IDs",
                    "type": "data",
                    "pattern": "txt$",
                    "required": false,
                    "execution_output": {
                        "process": "CLIPSEQ_FIND_LONGEST_TRANSCRIPT",
                        "pattern": "\\.txt$"
                    },
                    "description": "A list of transcript IDs for the longest transcript for each gene in provided GTF annotation."
                },
                "longest_transcript_fai": {
                    "name": "Longest transcript IDs and lengths",
                    "type": "data",
                    "pattern": "fai$",
                    "required": false,
                    "execution_output": {
                        "process": "CLIPSEQ_FIND_LONGEST_TRANSCRIPT",
                        "pattern": "\\.fai$"
                    },
                    "description": "A tabulated file of transcript IDs and lengths for the longest transcript for each gene in provided GTF annotation."
                },
                "longest_transcript_gtf": {
                    "name": "Longest transcript IDs",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "CLIPSEQ_FIND_LONGEST_TRANSCRIPT",
                        "pattern": "\\.gtf$"
                    },
                    "description": "A list of transcript IDs for the longest transcript for each gene in provided GTF annotation."
                },
                "filtered_gtf": {
                    "name": "Filtered GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "CLIPSEQ_FILTER_GTF",
                        "pattern": "\\.gtf$"
                    },
                    "description": "GTF filtered for 'basic' transcript tag and support levels TSL1 and TSL2 to improve performance of downstream tools."
                },
                "seg_gtf": {
                    "name": "Segmented GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "ICOUNT_SEG_GTF",
                        "pattern": "\\.gtf$"
                    },
                    "description": "GTF segmented for use in iCount peak calling using iCount segment command."
                },
                "seg_filt_gtf": {
                    "name": "Segmented filtered GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "ICOUNT_SEG_FILTGTF",
                        "pattern": "\\.gtf$"
                    },
                    "description": "Filtered GTF segmented for use in iCount peak calling using iCount segment command."
                },
                "seg_resolved_gtf": {
                    "name": "Segmented resolved filtered GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "RESOLVE_UNANNOTATED",
                        "pattern": "\\.gtf$"
                    },
                    "description": "Filtered GTF segmented using iCount segment command and then resolve unannotated regions by overlapping transcript segments."
                },
                "seg_resolved_gtf_genic": {
                    "name": "Segmented resolved genic filtered GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "RESOLVE_UNANNOTATED_GENIC_OTHER",
                        "pattern": "\\.gtf$"
                    },
                    "description": "Filtered GTF segmented using iCount segment command and then resolve unannotated regions by annotating as 'genic other'."
                },
                "regions_gtf": {
                    "name": "Regions GTF",
                    "type": "data",
                    "pattern": "gtf.gz$",
                    "required": false,
                    "execution_output": {
                        "process": "ICOUNT_SEG_GTF",
                        "pattern": "\\.gtf.gz$"
                    },
                    "description": "GTF regions for use in PEKA using iCount segment command."
                },
                "regions_filt_gtf": {
                    "name": "Filtered regions GTF",
                    "type": "data",
                    "pattern": "gtf.gz$",
                    "required": false,
                    "execution_output": {
                        "process": "ICOUNT_SEG_FILTGTF",
                        "pattern": "\\.gtf.gz$"
                    },
                    "description": "Filtered GTF regions for use in PEKA using iCount segment command."
                },
                "regions_resolved_gtf": {
                    "name": "Filtered resolved regions GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "RESOLVE_UNANNOTATED_REGIONS",
                        "pattern": "\\.gtf$"
                    },
                    "description": "Filtered GTF regions using iCount segment command and then resolve unannotated regions by overlapping transcript segments."
                },
                "regions_resolved_gtf_genic": {
                    "name": "Filtered resolved regions genic GTF",
                    "type": "data",
                    "pattern": "gtf$",
                    "required": false,
                    "execution_output": {
                        "process": "RESOLVE_UNANNOTATED_GENIC_OTHER_REGIONS",
                        "pattern": "\\.gtf$"
                    },
                    "description": "Filtered GTF regions using iCount segment command and then resolve unannotated regions by annotating as 'genic other'."
                }
            }
        },
        {
            "name": "Settings",
            "description": "Additional pipeline configuration options.",
            "advanced": true,
            "params": {
                "crosslink_position": {
                    "name": "Crosslink position",
                    "description": "The position of the crosslink in the read. Options are 'start', 'end' or 'middle'. Note that 'start' and 'end' correspond to start and end of read minus and plus 1 respectively.",
                    "type": "string",
                    "default": "start"
                },
                "move_umi_to_header": {
                    "name": "Extract UMI to header",
                    "description": "Runs UMI to header extraction based on the head format provided in UMI header format.",
                    "type": "boolean"
                },
                "umi_header_format": {
                    "name": "UMI header format",
                    "description": "Format of the UMI header to extract.",
                    "type": "string"
                },
                "skip_umi_dedupe": {
                    "name": "Skip UMI Deduplication",
                    "description": "Skip the UMI deduplication of BAMs.",
                    "type": "boolean"
                },
                "umi_separator": {
                    "name": "UMI Collapse seperator.",
                    "description": "The delimiter that UMICollapse uses to search for UMIs in the aligned reads.",
                    "type": "string",
                    "default": "rbc:"
                },
                "paraclu_min_value": {
                    "name": "Paraclu min value",
                    "description": "Omit clusters whose total data value is less than this minimum value.",
                    "type": "number"
                }
            }
        },
        {
            "name": "Command Line Options",
            "description": "Proide customised command line options to specific processes",
            "advanced": true,
            "params": {
                "bowtie_params": {
                    "name": "Bowtie parameters",
                    "description": "Mapping parameters for Bowtie pre-mapping",
                    "type": "string"
                },
                "star_params": {
                    "name": "STAR parameters",
                    "description": "Mapping parameters for STAR mapping",
                    "type": "string"
                },
                "clippy_params": {
                    "name": "Clippy parameters",
                    "description": "Parameters for Clippy peak calling",
                    "type": "string"
                },
                "icount_peak_params": {
                    "name": "iCount peak parameters",
                    "description": "Parameters for iCount peak calling",
                    "type": "string"
                },
                "peka_params": {
                    "name": "PEKA parameters",
                    "description": "Parameters for PEKA K-mer enrichment analysis",
                    "type": "string"
                },
                "trimgalore_params": {
                    "name": "Trim Galore! parameters",
                    "description": "Parameters for Trim Galore! We reccomend to include the default params along with any new ones you add: '--fastqc --length 10 -q 20'",
                    "type": "string"
                }
            }
        }
    ],
    "outputs": [
        {
            "name": "Raw genome crosslink bedgraph",
            "description": "Genomic crosslinks in bedgraph format for genome browser viewing.",
            "filetype": ".xl.bedgraph",
            "process": "CALC_GENOME_CROSSLINKS"
        },
        {
            "name": "Genomic peaks",
            "description": "Genomic peaks generated by Clippy.",
            "filetype": "Peaks.bed",
            "process": "CLIPPY_GENOME"
        },
        {
            "name": "Crosslink summary",
            "description": "Crosslinks summarised by gene, type (eg. CDS, intron) and subtype (eg. lncRNA, mRNA).",
            "filetype": "tsv",
            "process": "MERGE_SUMMARY"
        },
        {
            "name": "K-mer enrichment",
            "description": "K-mer enrichment motif analysis performed by PEKA. PDF file with graphs showing K-mer occurrence distributions around thresholded crosslink sites.",
            "filetype": "pdf",
            "process": "PEKA"
        },
        {
            "name": "Quality control report",
            "description": "MultiQC report of important quality control metrics.",
            "filetype": "html",
            "process": "MULTIQC"
        }
    ]
}
